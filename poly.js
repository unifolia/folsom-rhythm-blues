(()=>{var U=(e,n)=>()=>(e&&(n=e(e=0)),n);var $=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var M=(e,n,a)=>new Promise((p,c)=>{var G=u=>{try{h(a.next(u))}catch(j){c(j)}},T=u=>{try{h(a.throw(u))}catch(j){c(j)}},h=u=>u.done?p(u.value):Promise.resolve(u.value).then(G,T);h((a=a.apply(e,n)).next())});var m,l,i,ee,S,te,L,q,fe,w,ye,d,ne,B,ve,ge,H,I,oe,r,V=U(()=>{m=[1,5,8,13],l=[1,4,8,13],i=[1,1,5,8,11],ee=[1,1,6,8,11],S=[1,5,8,12],te={e:4,f:5,gb:6,g:7,ab:8,a:9,bb:10,b:11,c:0,db:1,d:2,eb:3},{e:L,f:q,gb:fe,g:w,ab:ye,a:d,bb:ne,b:B,c:ve,db:ge,d:H,eb:I}=te,oe={cmajor:m,cminor:l,c7:i,cmaj7:S,dmajor:m.map(e=>e+H),dminor:l.map(e=>e+H),d7:i.map(e=>e+H),ebmajor:m.map(e=>e+I),ebminor:l.map(e=>e+I),eb7:i.map(e=>e+I),emajor:m.map(e=>e+L),eminor:l.map(e=>e+L),e7:i.map(e=>e+L),fmajor:m.map(e=>e+q),fminor:l.map(e=>e+q),fmaj7:S.map(e=>e+q),gmajor:m.map(e=>e+w),gminor:l.map(e=>e+w),g7:i.map(e=>e+w),amajor:m.map(e=>e+d),aminor:l.map(e=>e+d),a7:i.map(e=>e+d),amaj7:S.map(e=>e+d),asus4:ee.map(e=>e+d),bbmajor:m.map(e=>e+ne),bmajor:m.map(e=>e+B),bminor:l.map(e=>e+B),b7:i.map(e=>e+B)},r=oe});var re,E,z=U(()=>{re=e=>{let a=Math.pow(2,.08333333333333333);return+(440*Math.pow(a,e+-22)).toFixed(4)},E=re});var de=$(F=>{V();z();var D=document.querySelector(".dotA"),J=document.querySelector(".dotB"),C=document.querySelector("input#polyOne"),k=document.querySelector("input#polyTwo"),A=document.querySelector("input#tempo"),g=document.querySelector("input#volume"),P=document.querySelector("#play"),ae=document.querySelector("#check"),s,o=[1],x=440,O=440,t=1,K=+g.value,Q,R,W,y,b=.01875,f=!1,ce=()=>M(F,null,function*(){s=new window.AudioContext}),X=()=>{y=60/+A.value*4*1e3},N=()=>{x=E(o[Math.floor(Math.random()*o.length)]),O=E(o[Math.floor(Math.random()*o.length)])},me=()=>{t>12&&(t=1),(t===1||t===7||t===11)&&(o=r.emajor),t===5&&(o=r.amajor),t===9&&(o=r.b7),N()},le=()=>{t>4&&(t=1),t===1&&(o=r.eminor),t===2&&(o=r.gmajor),t===3&&(o=r.dmajor),t===4&&(o=r.asus4),N()},ue=()=>{t>4&&(t=1),t===1&&(o=r.ebmajor),t===2&&(o=r.fmajor),t===3&&(o=r.gmajor),N()},ie=()=>{let e=document.querySelector("input:checked");e!=null&&e.value&&(+e.value==1&&me(),+e.value==2&&le(),+e.value==3&&ue())},se=(e,n)=>M(F,null,function*(){let a=s.createGain();a.gain.value=K/10,a.connect(s.destination);let p=s.createStereoPanner();p.pan.value=n==="left"?-.5:.5,p.connect(a);let c=s.createOscillator();c.type="square",c.frequency.setValueAtTime(e,s.currentTime),c.connect(p),c.start(),yield new Promise(T=>setTimeout(T,y*b)).then(()=>{c.stop(),c.disconnect()})}),v=(e,n)=>{se(e,n)},Y=()=>{W=setTimeout(()=>{Z(),++t,f===!0?Y():_()},y),ie(),v(x,"left"),v(O,"right"),Q=setInterval(()=>{v(x,"left")},y/+C.value),R=setInterval(()=>{v(O,"right")},y/+k.value)},Z=()=>{clearInterval(Q),clearInterval(R),X()},pe=()=>{X(),Y(),P.innerText="Stop"},_=()=>{Z(),clearInterval(W),t=1,P.innerText="Play"};P.addEventListener("click",()=>{s||ce(),f=!f,f?pe():f||_()});ae.addEventListener("click",()=>{b===.01875?b=b*40:b=.01875});C.oninput=()=>{document.querySelector(".polyOne").innerHTML=C.value};k.oninput=()=>{document.querySelector(".polyTwo").innerHTML=k.value};A.oninput=()=>{document.querySelector(".tempo").innerHTML=A.value};g.oninput=()=>{document.querySelector(".volume").innerHTML=g.value,K=+g.value};setInterval(()=>{D.style.backgroundColor="#22c1c3ba",J.style.backgroundColor="#d69916"},6e3);setInterval(()=>{D.style.backgroundColor="#d69916",J.style.backgroundColor="#22c1c3ba"},8e3)});de();})();
